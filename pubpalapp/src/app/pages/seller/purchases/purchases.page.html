<ion-content id="userContent" *ngIf="activepurchases" color="primary">
  <ion-grid class="p-5">
    <ng-template ngFor [ngForOf]="activepurchases" let-ap let-i="index">
      <ion-row class="pl-3" [ngClass]="{ 'alternating-row': i % 2 === 0, 'alternating-row-alt': i % 2 !== 0 }">
        <ion-col size="8" class="p-0">
          <ion-label color="dark">
            {{ ap.customername }}:&nbsp;{{ ap.category && ap.category.toLowerCase() === 'beer' ? ap.ingredients[0] : ap.itemname }} - ({{ ap.price | currency }})
          </ion-label>
        </ion-col>
        <ion-col size="4" class="p-0">
          <ion-item lines="none">
            <ion-label color="dark">
              {{ ap.currentstatus }}
            </ion-label>
            <ion-button *ngIf="ap['nextstatustext'] !== 'Complete' && ap.currentstatus !== 'cancelled'" slot="end" (click)="updateToNextStatus(ap)">
              {{ ap['nextstatustext'] }}
            </ion-button>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row class="pl-3" [ngClass]="{ 'alternating-row': i % 2 === 0, 'alternating-row-alt': i % 2 !== 0 }">
        <ion-col size-md="9" size-sm="8" class="p-0">
          <ion-list class="p-0">
            <ion-item lines="none" *ngIf="ap.instructions">
              <ion-label><strong>Special Instructions:</strong></ion-label><br />
              <ion-label>{{ ap.instructions }}</ion-label>
            </ion-item>
            <ng-template [ngIf]="!ap.category || ap.category.toLowerCase() !== 'beer'">
              <ion-item *ngFor="let ing of ap.ingredients" no-border lines="none">
                <ion-label color="dark" class="lbl-sm" >
                  {{ ing }}
                </ion-label>
              </ion-item>
            </ng-template>
          </ion-list>
          &nbsp;
        </ion-col>
        <ion-col size-md="3" size-sm="4" class="p-0">
          <ion-item lines="none" >
            <!-- (click)="!ap['showcancelcomments'] ? ap['showcancelcomments'] = true : cancelOrder(ap._id, ap['cancelcomments'])" -->
            <ion-button *ngIf="['ordered', 'accepted', 'inprogress'].indexOf(ap['nextstatus']) > -1" slot="end"
              [disabled]="ap['showcancelcomments'] && (!ap['cancelcomments'] || ap['cancelcomments'].length < 3)"
              (click)="openCancelModal(ap)">
              Cancel
            </ion-button>
          </ion-item>
        </ion-col>
      </ion-row>
    </ng-template>
  </ion-grid>
</ion-content>